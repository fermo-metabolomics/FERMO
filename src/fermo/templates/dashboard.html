{% extends "layout.html" %}
{% block title %}Flask-FERMO{% endblock %}
{% block content %} 
<main id=dashboardPage class="container-fluid flex-grow-1">
    <div class="row gx-2 mb-2 mt-1">
        <div class="col col-3">
            <div class="accordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="sampleTableHeader">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sampleTable" aria-expanded="true" aria-controls="sampleTable">
                        Sample Table
                        </button>
                    </h2>
                    <div id="sampleTable" class="accordion-collapse collapse" aria-labelledby="sampleTableHeader">
                        <div class="accordion-body overflow-auto">
                            This is the sample table <br>
                            Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur alias doloremque voluptate fuga aliquam reiciendis commodi eaque aperiam asperiores. Odit culpa sed consequatur nisi deserunt.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="featureTableHeader">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#featureTable" aria-expanded="false" aria-controls="featureTable">
                            Feature Table
                        </button>
                    </h2>
                    <div id="featureTable" class="accordion-collapse collapse" aria-labelledby="featureTableHeader">
                        <div class="accordion-body overflow-auto">
                            This is the feature table <br>
                            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Excepturi accusantium distinctio voluptas commodi optio? Tempora voluptatibus qui quae pariatur tenetur.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="filtersHeader">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#filters" aria-expanded="false" aria-controls="filters">
                            Filters
                        </button>
                    </h2>
                    <div id="filters" class="accordion-collapse collapse" aria-labelledby="filtersHeader">
                        <div class="accordion-body overflow-auto">
                            <div class="col-8">
                                <button class="btn btn-primary btn-label"
                                name="SaveSession"
                                value="Saved"
                                type="button">
                                    Save FERMO session file (JSON)
                                </button>
                            </div>
                            <hr>
                            <h6>Set filters for cutoff and press enter:</h6>
                            <form>
                                <div class="d-grid gap-2 me-2">
                                    <div id="featureVisibility">
                                        <label for="feature-visualization-radio" class="form-label">Visualize features
                                            <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                            target="_blank"
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="right"
                                            data-bs-custom-class="custom-tooltip"
                                            data-bs-title="Toggles visualization of features in chromatogram. 'ALL' shows all features, 'SELECTED', shows only the currently selected features and grays out the remainder. 'HIDDEN' completely masks out the non-selected features. For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;">
                                            </a>
                                        </label>
                                        <div id="featureVisualizationRadio">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="featureVisualizationOptions" id="visualizeAll" value="All" checked>
                                                <label class="form-check-label" for="visualizeAll">ALL</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="featureVisualizationOptions" id="visualizeSelected" value="Selected">
                                                <label class="form-check-label" for="visualizeSelected">SELECTED</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="featureVisualizationOptions" id="visualizeHidden" value="Hidden">
                                                <label class="form-check-label" for="visualizeHidden">HIDDEN</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="blankFeatures">
                                        <label for="blankFeatureRadio" class="form-label">Blank associated features
                                            <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                            target="_blank"
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="right"
                                            data-bs-custom-class="custom-tooltip"
                                            data-bs-title="Toggle to allow special designation of blank-associated features. When 'DESIGNATE', such features are specifically color-coded and automatically excluded from selection. For more information, click the info-button to access the docs.">
                                            <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                            </a>
                                        </label>
                                        <div id="blankFeatureRadio">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="BlankFeaturesOptions" id="designateBlank" value="Designate" checked>
                                                <label class="form-check-label" for="designateBlank">DESIGNATE</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="BlankFeaturesOptions" id="notDesignateBlank" value="DoNotDesignate">
                                                <label class="form-check-label" for="notDesignateBlank">DO NOT DESIGNATE</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="noveltyScore">
                                        <label for="noveltyScoreSlider" class="form-label">Novelty Score
                                            <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for putatively novel (unknown) features (if MS2Query was active and/or a spectral library was provided). A value of '0' would select all features, while a value of '1' would select only features that are most likely unknown. Click button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;">
                                            </a>
                                        </label>
                                        <div id="noveltyScoreSlider" class="range_container col-md-10 col-lg-8">
                                            <div class="sliders_control">
                                                <input id="fromSliderNovel" type="range" value="0" min="0" max="1" step="0.01"/>
                                                <input id="toSliderNovel" type="range" value="1" min="0" max="1" step="0.01"/>
                                            </div>
                                            <div class="form_control_slider">
                                                <div class="form_control_container">
                                                    <input type="number" class="form-control" id="fromInputNovel" value="0" min="0" max="1" step="0.01"/>
                                                </div>
                                                <div class="form_control_container">
                                                    <input type="number" class="form-control" id="toInputNovel" value="1" min="0" max="1" step="0.01"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="relativeIntensity">
                                        <label for="relativeIntensitySlider" class="form-label">Relative intensity
                                            <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter features for relative intensity. Click button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;">
                                            </a>
                                        </label>
                                        <div id="relativeIntensitySlider" class="range_container col-md-10 col-lg-8">
                                            <div class="sliders_control">
                                                <input id="fromSliderRelInt" type="range" value="0" min="0" max="1" step="0.01"/>
                                                <input id="toSliderRelInt" type="range" value="1" min="0" max="1" step="0.01"/>
                                            </div>
                                            <div class="form_control_slider">
                                                <div class="form_control_container">
                                                    <input type="number" class="form-control" id="fromInputRelInt" value="0" min="0" max="1" step="0.01"/>
                                                </div>
                                                <div class="form_control_container">
                                                    <input type="number" class="form-control" id="toInputRelInt" value="1" min="0" max="1" step="0.01"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="peakOverlap">
                                        <label for="peakOverlapSlider" class="form-label">Peak overlap (%)
                                            <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter features for peak collisions. The higher the value, the more of the peak is overlapping (colliding) with another peak. Click button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;">
                                            </a>
                                        </label>
                                        <div id="peakOverlapSlider" class="range_container col-md-10 col-lg-8">
                                            <div class="sliders_control">
                                                <input id="fromSliderPeak" type="range" value="0" min="0" max="1" step="0.01"/>
                                                <input id="toSliderPeak" type="range" value="1" min="0" max="1" step="0.01"/>
                                            </div>
                                            <div class="form_control_slider">
                                                <div class="form_control_container">
                                                    <input type="number" class="form-control" id="fromInputPeak" value="0" min="0" max="1" step="0.01"/>
                                                </div>
                                                <div class="form_control_container">
                                                    <input type="number" class="form-control" id="toInputPeak" value="1" min="0" max="1" step="0.01"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="quantDataAssociation">
                                        <label for="quantDataAssociationRadio" class="form-label">QuantData-associated
                                            <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                            target="_blank"
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="right"
                                            data-bs-custom-class="custom-tooltip"
                                            data-bs-title="Select features associated with quantitative biological data (if such data was provided). 'SPECIFICITY' selects any feature putatively associated with quantitative biological data, 'SPEC.+TREND' also considers correlation between feature intensity and quantitative biological data (if it follows the trend). Click button to access the docs.">
                                            <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                            </a>
                                        </label>
                                        <div id="quantDataAssociationRadio">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="notQuantDataAssociated" id="notQuantDataAssociated" value="NotAssociated" checked>
                                                <label class="form-check-label" for="notQuantDataAssociated">OFF</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="quantDataSpecificity" id="quantDataSpecificity" value="Specificity">
                                                <label class="form-check-label" for="quantDataSpecificity">SPECIFICITY</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="quantDataSpecTrend" id="quantDataSpecTrend" value="SpecTrend">
                                                <label class="form-check-label" for="quantDataSpecTrend">SPEC.+TREND</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-grid gap-2 col-xl-9">
                                        <div id="adductFilter">
                                            <label for="adductSearch" class="mb-1">Adduct/Isotope search
                                                <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for features with annotations as adducts/isotopes. Filter uses regular expressions (POSIX ERE), and certain characters have special meaning. For example, to select all annotations, use expression '.+'. For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                                </a>
                                            </label>
                                            <input id="adductSearch" class="form-control" type="search" placeholder="Regular expression search" aria-label="adducts/isotopes search">
                                        </div>
                                        <div id="annotationFilter">
                                            <label for="annotationSearch" class="mb-1">Annotation search
                                                <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for features with annotation from library/MS2Query matching. Filter uses regular expressions (POSIX ERE), and certain characters have special meaning. For example, to select all annotations, use expression '.+'. For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                                </a>
                                            </label>
                                            <input id="annotationSearch" class="form-control" type="search" placeholder="Regular expression search" aria-label="Annotation search">
                                        </div>
                                        <div id="idFilter">
                                            <label for="featureIdSearch" class="mb-1">Feature ID search
                                                <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for feature ID. Filters features for a single feature ID number. For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                                </a>
                                            </label>
                                            <input id="featureIdSearch" class="form-control" type="number" placeholder="Feature ID number" min="0" step="1" aria-label="Feature ID search">
                                        </div>
                                        <div id="specNetIdFilter">
                                            <label for="specNetIdSearch" class="mb-1">Spectral network ID search
                                                <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for spectral similarity network ID. Filters for features in a specific spectral network (does not include blank features since they are deselected by default). For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                                </a>
                                            </label>
                                            <input id="specNetIdSearch" class="form-control" type="number" placeholder="Network ID number" min="0" step="1" aria-label="Spectral network ID search">
                                        </div>
                                        <div id="groupFeaturesFilter">
                                            <label for="groupFeatures" class="mb-1">Group filter (features)
                                                <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for group metadata for individual features. Filter uses regular expressions (POSIX ERE), and certain characters have special meaning. For example, to select multiple group annotations, use expression 'group1|group2'. To exclude a specific group, use expression '^((?!groupname).)*$'. For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                                </a>
                                            </label>
                                            <input id="groupFeatures" class="form-control" type="search" placeholder="Regular expression search" aria-label="Group features search">
                                        </div>
                                        <div id="groupNetworkFilter">
                                            <label for="groupNetworks" class="mb-1">Group filter (networks)
                                                <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for group metadata for similarity networks. Filter uses regular expressions (POSIX ERE), and certain characters have special meaning. For example, to select multiple group annotations, use expression 'group1|group2'. To exclude a specific group (e.g. BLANK), use expression '^((?!BLANK).)*$'. For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;" >
                                                </a>
                                            </label>
                                            <input id="groupFeatures" class="form-control" type="search" placeholder="Regular expression search" aria-label="Group networks search">
                                        </div>
                                        <div id="sampleNameFilter">
                                            <label for="sampleNameSearch" class="mb-1">Sample name search
                                                <a href="https://github.com/mmzdouc/FERMO/wiki/Scores-page"
                                                target="_blank"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="right"
                                                data-bs-custom-class="custom-tooltip"
                                                data-bs-title="Filter for sample names. Filter uses regular expressions (POSIX ERE), and certain characters have special meaning. For example, to select multiple samples, use expression 'sample1|sample2'. To exclude a specific sample, use expression '^((?!sample).)*$', where 'sample' is the name of the name of the sample. For more information, click the info-button to access the docs.">
                                                <img src="{{ url_for('static', filename='images/question-circle-fill.SVG')}}" width="40" alt="?" style="color: 17,103,137;">
                                                </a>
                                            </label>
                                            <input id="sampleNameSearch" class="form-control" type="search" placeholder="Regular expression search" aria-label="Sample name search">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col col-9">
            <div class="row">
                <div class="col"> 
                    <div class="card"> 
                        <div class="card-header">
                            Main Chromatogram <br>
                        </div>
                        <div class="card-body overflow-auto">
                            <div id="mainChromatogram"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row gx-2 mt-1">
                <div class="accordion col-7">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="cytoscapeHeader">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#cytoscape" aria-expanded="true" aria-controls="Cytoscape">
                                Cytoscape
                            </button>
                        </h2>
                        <div class="accordion-collapse collapse" id="cytoscape" aria-labelledby="CytoscapeHeader">
                            <div class="accordion-body overflow-auto">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nesciunt, nemo qui aliquam sapiente labore pariatur ipsum quidem molestiae rerum, natus nihil sunt et, incidunt cumque eius quisquam eligendi exercitationem ut libero modi iste laborum ad! Sunt earum nisi quasi? Totam dignissimos officia dolorum dolores fugiat nesciunt earum perferendis! Cupiditate, reiciendis?
                            </div> 
                        </div>
                    </div>
                </div>
                <div class="accordion col-5">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="sampleChromatogramsHeader">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sampleChromatograms" aria-expanded="false" aria-controls="sampleChromatograms"> 
                                Sample chromatograms
                            </button>
                        </h2>
                        <div class="accordion-collapse collapse" id="sampleChromatograms" aria-labelledby="sampleChromatogramsHeader">
                            <div class="accordion-body overflow-auto">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Eum, dignissimos officia vero excepturi, officiis enim, accusantium laudantium iusto asperiores aut quidem.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
<script src="{{url_for('static', filename='js/plotly-2.18.2.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/multi_range_slider.js') }}"></script>
<script>
    // activate the tooltips
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
</script>
<script>
    // plot the main chromatogram
    var graph = {{ graphJSON | safe }};
    Plotly.newPlot('mainChromatogram', graph, {});
</script>

{% endblock %}